(()=>{console.log("utms script loaded! 2.3.11");class t{static addUtmParametersToUrl(e){const n=t.urlWithoutParams(e),o=t.paramsFromUrl(e),r=t.getUtmParameters(),i=new URLSearchParams;o.forEach(((t,e)=>i.append(e,t))),r.forEach(((t,e)=>i.append(e,t)));const a=t.urlParametersWithoutDuplicates(i),u=-1===n.indexOf("?")?"?":"&";return`${n}${u}${a.toString()}`}static urlWithoutParams(t){return t.split("?")[0]}static paramsFromUrl(t){if(!t)return new URLSearchParams;const e=t instanceof URL?t.href:t;if(!e.includes("?"))return new URLSearchParams;const n=e.split("?");if(n.length<=1)return new URLSearchParams;const o=n[1];return new URLSearchParams(o)}static urlParametersWithoutDuplicates(t){const e=Array.from(t.keys()),n=new Map;e.forEach((e=>{const o=t.getAll(e);n.set(e,o[o.length-1])}));const o=new URLSearchParams;return n.forEach(((t,e)=>{o.append(e,t)})),o}static getUtmParameters(){var t;const e="hQwK21wXxR",o="rKm-km-rKm",r=new URLSearchParams(window.location.search);function i(t){const e=r.get(t);if(null!=e&&"null"!==e&&"undefined"!==e&&""!==e)return e;const o=localStorage.getItem(t);if(!o)return"";const i=localStorage.getItem(n(t));return!i||new Date(i)<new Date?(localStorage.removeItem(t),localStorage.removeItem(n(t)),""):o}function a(t){return t.join(e)}const u=i("utm_term"),s=i("utm_content"),c=i("utm_medium"),l=i("utm_campaign"),d=function(t){const e=function(){var t;const e=localStorage.getItem("lead");if(!e)return null;const n=JSON.parse(e);return null!==(t=null==n?void 0:n._id)&&void 0!==t?t:null}();return e?t.includes("jLj")?t:`${t}jLj${e}`:t}(i("utm_source")),m=new URLSearchParams;m.set("utm_source",d),m.set("utm_campaign",l.includes(o)?l:`${l}${o}${c}`),m.set("utm_medium",c),m.set("utm_content",s),m.set("utm_term",u);const w=null!==(t=m.get("utm_campaign"))&&void 0!==t?t:"",v=[d,w,c,s,u],f=a(v);m.set("subid",d),m.set("sid2",w),m.set("subid2",w),m.set("subid3",c),m.set("subid4",s),m.set("subid5",w);const h=i("xcod"),p=i("src"),g=""!==h?h:p,_=function(t,n){if(t.length<=255)return t;const r=Math.floor(18.8);function i(t,e,n){function i(t){return t.substring(0,r)+"..."}if(!e)return i(t);const a=null!=n?n:"|",u=t.split(o)[0].split(a),s=u.length>1?u[u.length-1]:"";return`${i(1===u.length?u[0]:u.slice(0,-1).join(a))}${a}${s}`}const[u,s,c,l,d]=t.split(e);return a([i(u,!0,"jLj"),i(s,!0),i(c,!0),i(l,!0),i(d,!1)])}(v.every((t=>""===t))?g:f);m.set("xcod",_),m.set("sck",_),null!=p&&""!==p&&m.set("src",p);const S=r.get("fbclid");return null!=S&&""!==S&&m.set("fbclid",S),(()=>{const t=t=>null==t||""===t,e=i("utm_source"),n=i("utm_medium"),o=i("utm_campaign"),r=i("utm_content"),a=i("utm_term"),u=i("xcod"),s=i("src"),c=m.get("fbclid");return t(e)&&t(n)&&t(o)&&t(r)&&t(a)&&t(u)&&t(s)&&t(c)})()&&m.set("utm_source","organic"),m}}window.paramsList=["utm_source","utm_campaign","utm_medium","utm_content","utm_term","xcod","src"],window.itemExpInDays=7;const e=["utm_source","utm_campaign","utm_medium","utm_content","xcod","sck"];function n(t){return`${t}_exp`}function o(){function o(n){document.querySelectorAll("a").forEach((o=>{if(!(o.href.startsWith("mailto:")||o.href.startsWith("tel:")||o.href.startsWith("whatsapp:")||o.href.includes("#"))){if(n&&e.every((t=>o.href.includes(t))))return;o.href=t.addUtmParametersToUrl(o.href)}}))}function r(n){document.querySelectorAll("form").forEach((o=>{n&&e.every((t=>o.action.includes(t)))||(o.action=t.addUtmParametersToUrl(o.action),t.getUtmParameters().forEach(((t,e)=>{const n=(r=e,o.querySelector(`input[name="${r}"]`));var r;if(n)return void n.setAttribute("value",t);const i=((t,e)=>{const n=document.createElement("input");return n.type="hidden",n.name=t,n.value=e,n})(e,t);o.appendChild(i)})))}))}!function(){const t=new URLSearchParams(window.location.search);window.paramsList.forEach((e=>{const o=t.get(e);o&&((t,e)=>{localStorage.setItem(t,e);const o=new Date((new Date).getTime()+24*window.itemExpInDays*60*60*1e3);localStorage.setItem(n(t),o.toISOString())})(e,o)}))}();const i=function(){var t,e,n,o,r,i,a,u,s,c,l,d,m,w,v;const f=null!==(n=null===(e=null===(t=null===window||void 0===window?void 0:window.BOOMR)||void 0===t?void 0:t.themeName)||void 0===e?void 0:e.includes("Dropmeta"))&&void 0!==n&&n,h=null!==(i=null===(r=null===(o=null===window||void 0===window?void 0:window.BOOMR)||void 0===o?void 0:o.themeName)||void 0===r?void 0:r.includes("Warehouse"))&&void 0!==i&&i,p=null!==(s=null===(u=null===(a=null===window||void 0===window?void 0:window.BOOMR)||void 0===a?void 0:a.themeName)||void 0===u?void 0:u.includes("ClassicÂ®"))&&void 0!==s&&s,g=null!==(d=null===(l=null===(c=null===window||void 0===window?void 0:window.BOOMR)||void 0===c?void 0:c.themeName)||void 0===l?void 0:l.includes("Tema Vision Nichada"))&&void 0!==d&&d,_=null!==(v=null===(w=null===(m=null===window||void 0===window?void 0:window.BOOMR)||void 0===m?void 0:m.themeName)||void 0===w?void 0:w.includes("Waresabino"))&&void 0!==v&&v;return f||h||p||g||_}();o(),function(){const e=window.open;window.open=function(n,o,r){var i;return n=t.addUtmParametersToUrl(null!==(i=null==n?void 0:n.toString())&&void 0!==i?i:""),e(n,o||"",r||"")}}(),i||(r(),function(){const{body:t}=document;new MutationObserver(((t,e)=>{const n=t=>{if(t.nodeType!==Node.ELEMENT_NODE)return!1;const e=t;return"INPUT"===e.tagName&&"hidden"===(null==e?void 0:e.type)};t.some((t=>Array.from(t.addedNodes).some(n)))||(o(!0),r(!0))})).observe(t,{subtree:!0,childList:!0})}(),document.querySelectorAll("iframe").forEach((e=>{e.src=t.addUtmParametersToUrl(e.src)})))}const r=()=>{o(),setTimeout(o,2e3),setTimeout(o,3e3),setTimeout(o,5e3),setTimeout(o,9e3)};"complete"===document.readyState?r():window.addEventListener("load",r)})();